# Add-ons Feature: Target Design vs Current Implementation

## Visual Comparison

### ğŸ”µ mini carousel (Target)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        You May Also Like                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚       â”‚                     â”‚          â”‚
â”‚       â”‚   [Product Image]   â”‚          â”‚
â”‚       â”‚                     â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚         Add-on Product Title            â”‚
â”‚                                         â”‚
â”‚     ADD | $27  $21.60                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                         â”‚
â”‚         â— â—‹ â—‹ â—‹                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features:**

- âœ… Carousel (one product at a time)
- âœ… Vertical card layout
- âœ… Compact design
- âœ… Inline pricing with strikethrough
- âœ… Dot navigation
- âœ… "You May Also Like" heading

---

### âšª Current Implementation

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Complete Your Order                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  [IMG]   â”‚  Sample Mug â”‚            â”‚
â”‚  â”‚  32x32   â”‚  Standard   â”‚            â”‚
â”‚  â”‚          â”‚  A nice mug â”‚            â”‚
â”‚  â”‚          â”‚  $12.00     â”‚            â”‚
â”‚  â”‚          â”‚  [Add +]    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  [IMG]   â”‚  Sticker    â”‚            â”‚
â”‚  â”‚  32x32   â”‚  Small      â”‚            â”‚
â”‚  â”‚          â”‚  A sticker  â”‚            â”‚
â”‚  â”‚          â”‚  $8.00      â”‚            â”‚
â”‚  â”‚          â”‚  [Add +]    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Current Features:**

- âŒ Grid layout (shows all at once)
- âœ… Horizontal card layout
- âš ï¸ More detailed (may be too busy)
- âœ… Discount pricing shown
- âŒ No navigation needed (all visible)

---

## Feature Matrix

| Feature              | Target Design          | Current               | Need to Change?   |
| -------------------- | ---------------------- | --------------------- | ----------------- |
| **Layout**           | Carousel (1 at a time) | Grid (all visible)    | âœ… Yes â†’ Carousel |
| **Card Style**       | Vertical compact       | Horizontal detailed   | âœ… Yes â†’ Vertical |
| **Image Size**       | Large (square)         | Small (32x32)         | âœ… Yes â†’ Larger   |
| **Pricing**          | Inline: "ADD \| $X $Y" | Separate price line   | âœ… Yes â†’ Inline   |
| **Description**      | Product name only      | Name + variant + desc | âš ï¸ Simplify       |
| **Navigation**       | Dots                   | None                  | âœ… Add dots       |
| **Heading**          | "You May Also Like"    | "Complete Your Order" | âš ï¸ Update copy    |
| **Discount Display** | Show both prices       | Show discount %       | âœ… Both prices    |

---

## Implementation Changes

### 1. AddOnCard Component

**Current Structure:**

```tsx

<Card> // Horizontal layout
  <CardContent className="flex flex-row">
    <Image 32x32 />
    <div>
      <h3>{product.name}</h3>
      <p>{variant.name}</p>
      <p className="text-muted">{description}</p>
      <div>
        {hasDiscount && <span className="line-through">{regularPrice}</span>}
        <span>{displayPrice}</span>
      </div>
      <Button><Plus />Add</Button>
    </div>
  </CardContent>
</Card>
```

**Target Structure:**

```tsx

<Card>
  {" "}
  // Vertical layout, centered
  <CardContent className="flex flex-col items-center p-6">
    <Image className="w-full aspect-square rounded-lg mb-4" />
    <h3 className="text-lg font-semibold mb-3 text-center">{product.name}</h3>
    <Button variant="outline" className="w-full">
      ADD |
      {hasDiscount && (
        <span className="line-through ml-2">${originalPrice}</span>
      )}
      <span className="ml-2 font-bold">${displayPrice}</span>
    </Button>
  </CardContent>
</Card>
```

**Changes:**

- Switch flex-row â†’ flex-col
- Image: 32x32 â†’ full width square
- Remove variant name (unless critical)
- Remove description (keep simple)
- Button includes pricing inline
- Center-align content

---

### 2. ProductClientPage Add-ons Section

**Current:**

```typescript

<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
  {addOns.map((addOn) => (
    <AddOnCard key={...} addOn={addOn} />
  ))}
</div>
```

**Target:**

```typescript

<Carousel
  mode="products"
  items={addOns}
  renderItem={(addOn) => (
    <AddOnCard addOn={addOn} onAddToCart={() => handleAddOnToCart(addOn)} />
  )}
  itemWidth="max-w-sm"
  showDots={true}
  dotsPosition="bottom"
/>
```

**Changes:**

- Replace grid with Carousel
- One card visible at a time
- Add dot navigation
- Max width constraint (don't span full screen)

---

### 3. Heading & Copy

**Current:** "Complete Your Order"  
**Target:** "You May Also Like"

**Recommendation:** Use target design  
**Alternative Options:**

- "Perfect Pairings"
- "Customers Also Bought"
- "Complete Your Coffee Setup"

**Implementation:**

```tsx

<h2 className="text-3xl font-bold text-center text-text-base mb-8">
  You May Also Like
</h2>
```

---

## Mobile Considerations

### Target Mobile Design

- Same carousel pattern
- Card takes most of screen width
- Dots still visible below
- Swipe gestures (future enhancement)

### Our Mobile Strategy

- Card width: `max-w-sm` (prevents too wide on mobile)
- Center content
- Dots remain below card
- Touch-friendly dot size (already implemented in CarouselDots)

---

## Accessibility

### Current State âœ…

- CarouselDots has aria-labels
- Keyboard navigation (click dots)
- Focus states on buttons

### Enhancements Needed âš ï¸

- Add keyboard arrow support (â† â†’)
- Announce current slide (aria-live)
- Skip to next/previous links

---

## Performance

### Grid Approach (Current)

- **Pros:** All cards rendered, no navigation needed
- **Cons:** Large DOM if many add-ons, more layout shifts

### Carousel Approach (Target)

- **Pros:** Only 1 card rendered at a time, cleaner DOM
- **Cons:** User must navigate to see all options

### Optimization Strategy

- Lazy load images (Next.js Image default)
- Preload adjacent slides (future)
- Animate only transform (no layout changes)

---

## Data Flow

No changes needed - server action already fetches add-ons:

```typescript

// Server side (page.tsx)
const addOns = await getProductAddOns(product.id);

// Client side (ProductClientPage.tsx)
<Carousel items={addOns} ... />
```

---

## Testing Plan

### Visual Regression

- [ ] Add-ons appear as carousel (not grid)
- [ ] Card is vertical (image top, info below)
- [ ] Pricing shows inline: "ADD | $X $Y"
- [ ] Dots navigation visible
- [ ] Mobile: Card width appropriate

### Functional

- [ ] Clicking dot changes visible add-on
- [ ] ADD button adds correct product to cart
- [ ] Discount pricing calculated correctly
- [ ] Works with 1 add-on (no dots)
- [ ] Works with 0 add-ons (section hidden)

### Accessibility

- [ ] Keyboard: Tab to dots, Enter to select
- [ ] Screen reader announces current slide
- [ ] Focus visible on interactive elements

---

## Migration Steps

1. âœ… Create `docs/product-carousel-design.md`
2. âœ… Create `docs/addons-comparison.md` (this file)
3. â³ Update `Carousel` component to support products mode
4. â³ Redesign `AddOnCard` component (vertical, compact)
5. â³ Update `ProductClientPage` (grid â†’ carousel)
6. â³ Update copy "Complete Your Order" â†’ "You May Also Like"
7. â³ Test across devices
8. â³ Update tests

---

## Open Questions

1. **Variant display?** - Reference design shows primary variant only. Do we need to show variant name?
2. **Multiple add-ons per product?** - Current: one add-on per product. Future: multiple variants?
3. **Auto-advance carousel?** - Should it auto-rotate or wait for user interaction?
4. **Limit add-ons count?** - Show top 3-4, or all configured add-ons?
